<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.367">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>converse</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./curriculum.html"> 
<span class="menu-text">Curriculum Vitae</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./cycling.html"> 
<span class="menu-text">Cycling</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="https://github.com/fricour" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://linkedin.com/in/florian-ricour-a06359281" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
    <a href="mailto:info@fricour.aleeas.com?" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#century-scale-biological-carbon-sequestration-flux" id="toc-century-scale-biological-carbon-sequestration-flux" class="nav-link active" data-scroll-target="#century-scale-biological-carbon-sequestration-flux">Century-scale biological carbon sequestration flux</a></li>
  <li><a href="#keywords-to-keep-in-mind" id="toc-keywords-to-keep-in-mind" class="nav-link" data-scroll-target="#keywords-to-keep-in-mind">Keywords to keep in mind</a></li>
  <li><a href="#a-taste-of-f_100" id="toc-a-taste-of-f_100" class="nav-link" data-scroll-target="#a-taste-of-f_100">A taste of <span class="math inline">\(f_{100}\)</span></a></li>
  <li><a href="#a-new-paradigm-for-the-bcp" id="toc-a-new-paradigm-for-the-bcp" class="nav-link" data-scroll-target="#a-new-paradigm-for-the-bcp">A new paradigm for the BCP</a></li>
  <li><a href="#a-variety-of-converse-versions" id="toc-a-variety-of-converse-versions" class="nav-link" data-scroll-target="#a-variety-of-converse-versions">A variety of CONVERSE versions</a></li>
  <li><a href="#a-visual-tool-to-compare-the-7-versions" id="toc-a-visual-tool-to-compare-the-7-versions" class="nav-link" data-scroll-target="#a-visual-tool-to-compare-the-7-versions">A visual tool to compare the 7 versions</a></li>
  <li><a href="#converse-in-numbers" id="toc-converse-in-numbers" class="nav-link" data-scroll-target="#converse-in-numbers">CONVERSE in numbers</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">Conclusion</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="century-scale-biological-carbon-sequestration-flux" class="level1">
<h1>Century-scale biological carbon sequestration flux</h1>
<p>In our paper entitled <em>Century-scale carbon sequestration flux throughout the ocean by the biological pump</em>, we estimate that the flux of organic carbon that is sequestered for <span class="math inline">\(\geq\)</span> 100 years by the biological carbon pump (BCP) is 0.9-2.6 Pg C year<span class="math inline">\(^{-1}\)</span>. This estimation is <strong>up to 6 times larger</strong> than previous estimates based on the common assumption that sequestration only occurs in the deep ocean (i.e.&nbsp;typically below 1000 m).</p>
<p>Instead, our study is based on the concept of continuous vertical sequestration, that we refer to as CONVERSE, which states that sequestration (for <span class="math inline">\(\geq\)</span> 100 years) can occur throughout the entire water column.</p>
<p>While this work is published, I feel like something is missing. Based on my experience with scientific literature, I would say that it is not uncommon to encounter those issues when you write a paper:</p>
<ol type="1">
<li>Too much text and you don’t want to throw away half of your research so you write (lots of) pages of supplementary material.</li>
<li>Figures are static hence it is sometimes difficult to “feel” the data.</li>
<li>Figures and tables are too big or too complicated because you don’t want to go back to point 1.</li>
</ol>
<p>Therefore, by writing this summary, I hope to bring some data interactivity and a clearer understanding of our results.</p>
</section>
<section id="keywords-to-keep-in-mind" class="level1">
<h1>Keywords to keep in mind</h1>
<p>Before going into details, let me define some keywords to understand the main points of our paper.</p>
<ul>
<li><p>DIC — dissolved inorganic carbon, composed of <span class="math inline">\(CO_{2}\)</span>, <span class="math inline">\(H_{2}CO_{3}\)</span>, <span class="math inline">\(HCO_{3}^{-}\)</span> and <span class="math inline">\(CO_{3}^{2-}\)</span>.</p></li>
<li><p>Remineralization — respiration of organic matter by organisms which consequently produce biogenic DIC (i.e.&nbsp;DIC<span class="math inline">\(_{bio}\)</span>).</p></li>
<li><p>POC / DOC — particulate / dissolved organic carbon.</p></li>
<li><p>Biological carbon pump (BCP) — series of ocean processes through which inorganic carbon is fixed as organic matter by photosynthesis in sunlit surface water and then transported to the ocean interior, and possibly the sediment, resulting in the storage of carbon <span class="citation" data-cites="Ipcc2019-qc">(<a href="#ref-Ipcc2019-qc" role="doc-biblioref">IPCC 2019</a>)</span>.</p></li>
<li><p>Carbon sequestration — it refers to a given time where DIC is hidden from the atmosphere. In our paper, we use the IPCC definition which states that 100 years is a period long enough to consider that this carbon is sequestered (i.e.&nbsp;stored away from the atmosphere).</p></li>
<li><p><span class="math inline">\(f_{100}\)</span> — it represents the fraction of water at a given location and depth that will remain in the ocean for <span class="math inline">\(\geq\)</span> 100 years <span class="citation" data-cites="Siegel2021-oz">(<a href="#ref-Siegel2021-oz" role="doc-biblioref">Siegel et al. 2021</a>)</span>. In other words, it represents the fraction of inorganic carbon in a water parcel that will remain hidden from the atmosphere for at least a century.</p></li>
</ul>
</section>
<section id="a-taste-of-f_100" class="level1">
<h1>A taste of <span class="math inline">\(f_{100}\)</span></h1>
<p>The model of <span class="citation" data-cites="Siegel2021-oz">Siegel et al. (<a href="#ref-Siegel2021-oz" role="doc-biblioref">2021</a>)</span> returns <span class="math inline">\(f_{100}\)</span> values in 48 oceanic layers, from the surface down to ~5500 m depth. Using the map below, you can observe the regional disparities of <span class="math inline">\(f_{100}\)</span> at different depths and highlight regions of interest by saturating the colorbar (<span class="math inline">\(f_{100}\)</span> ranges between 0 and 1).</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="53" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 52;"><span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@7"</span>)</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>world <span class="op">=</span> <span class="fu">FileAttachment</span>(<span class="st">"data_converse/countries-110m.json"</span>)<span class="op">.</span><span class="fu">json</span>()</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>land <span class="op">=</span> topojson<span class="op">.</span><span class="fu">feature</span>(world<span class="op">,</span> world<span class="op">.</span><span class="at">objects</span><span class="op">.</span><span class="at">land</span>)</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>f100_data <span class="op">=</span> d3<span class="op">.</span><span class="fu">json</span>(<span class="st">"data_converse/f100_full.geojson"</span>)<span class="op">.</span><span class="fu">then</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>(f <span class="kw">=&gt;</span> {</span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> c <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoCentroid</span>(f)<span class="op">;</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {<span class="dt">value</span><span class="op">:</span> f<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">value</span><span class="op">,</span> <span class="dt">depth</span><span class="op">:</span> f<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">depth</span><span class="op">,</span> <span class="dt">longitude</span><span class="op">:</span> c[<span class="dv">0</span>]<span class="op">,</span> <span class="dt">latitude</span><span class="op">:</span> c[<span class="dv">1</span>]}<span class="op">;</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>viewof max_value1 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"max colorbar"</span>})</span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>viewof f100_depth <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>  [</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">48</span><span class="op">,</span> <span class="dv">61</span><span class="op">,</span> <span class="dv">75</span><span class="op">,</span> <span class="dv">91</span><span class="op">,</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>    <span class="dv">109</span><span class="op">,</span> <span class="dv">130</span><span class="op">,</span> <span class="dv">153</span><span class="op">,</span> <span class="dv">179</span><span class="op">,</span> <span class="dv">209</span><span class="op">,</span> <span class="dv">242</span><span class="op">,</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>    <span class="dv">279</span><span class="op">,</span> <span class="dv">320</span><span class="op">,</span> <span class="dv">365</span><span class="op">,</span> <span class="dv">415</span><span class="op">,</span> <span class="dv">470</span><span class="op">,</span> <span class="dv">531</span><span class="op">,</span></span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>    <span class="dv">597</span><span class="op">,</span> <span class="dv">669</span><span class="op">,</span> <span class="dv">747</span><span class="op">,</span> <span class="dv">832</span><span class="op">,</span> <span class="dv">923</span><span class="op">,</span> <span class="dv">1022</span><span class="op">,</span></span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1128</span><span class="op">,</span> <span class="dv">1241</span><span class="op">,</span> <span class="dv">1363</span><span class="op">,</span> <span class="dv">1493</span><span class="op">,</span> <span class="dv">1631</span><span class="op">,</span></span>
<span id="cb1-72"><a href="#cb1-72" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1778</span><span class="op">,</span> <span class="dv">1935</span><span class="op">,</span> <span class="dv">2101</span><span class="op">,</span> <span class="dv">2277</span><span class="op">,</span> <span class="dv">2462</span><span class="op">,</span></span>
<span id="cb1-73"><a href="#cb1-73" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2658</span><span class="op">,</span> <span class="dv">2865</span><span class="op">,</span> <span class="dv">3083</span><span class="op">,</span> <span class="dv">3312</span><span class="op">,</span> <span class="dv">3552</span><span class="op">,</span></span>
<span id="cb1-74"><a href="#cb1-74" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3804</span><span class="op">,</span> <span class="dv">4068</span><span class="op">,</span> <span class="dv">4345</span><span class="op">,</span> <span class="dv">4634</span><span class="op">,</span> <span class="dv">4937</span><span class="op">,</span></span>
<span id="cb1-75"><a href="#cb1-75" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5253</span><span class="op">,</span> <span class="dv">5582</span></span>
<span id="cb1-76"><a href="#cb1-76" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb1-77"><a href="#cb1-77" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"depth (m)"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="fl">531.0</span>}</span>
<span id="cb1-78"><a href="#cb1-78" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-79"><a href="#cb1-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-80"><a href="#cb1-80" aria-hidden="true" tabindex="-1"></a>f100_filtered <span class="op">=</span> f100_data<span class="op">.</span><span class="fu">filter</span>(data <span class="kw">=&gt;</span> data<span class="op">.</span><span class="at">depth</span> <span class="op">==</span> f100_depth)<span class="op">;</span></span>
<span id="cb1-81"><a href="#cb1-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-82"><a href="#cb1-82" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb1-83"><a href="#cb1-83" aria-hidden="true" tabindex="-1"></a>  <span class="dt">projection</span><span class="op">:</span> {<span class="dt">type</span><span class="op">:</span> <span class="st">"equal-earth"</span>}<span class="op">,</span></span>
<span id="cb1-84"><a href="#cb1-84" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb1-85"><a href="#cb1-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">scheme</span><span class="op">:</span> <span class="st">"BuPu"</span><span class="op">,</span></span>
<span id="cb1-86"><a href="#cb1-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> max_value1]<span class="op">,</span></span>
<span id="cb1-87"><a href="#cb1-87" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-88"><a href="#cb1-88" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"f100"</span></span>
<span id="cb1-89"><a href="#cb1-89" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-90"><a href="#cb1-90" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb1-91"><a href="#cb1-91" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">raster</span>(f100_filtered<span class="op">,</span> {</span>
<span id="cb1-92"><a href="#cb1-92" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fill</span><span class="op">:</span> <span class="st">"value"</span><span class="op">,</span></span>
<span id="cb1-93"><a href="#cb1-93" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb1-94"><a href="#cb1-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">91</span><span class="op">,</span></span>
<span id="cb1-95"><a href="#cb1-95" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x1</span><span class="op">:</span> <span class="op">-</span><span class="dv">180</span><span class="op">,</span></span>
<span id="cb1-96"><a href="#cb1-96" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y1</span><span class="op">:</span> <span class="op">-</span><span class="dv">90</span><span class="op">,</span></span>
<span id="cb1-97"><a href="#cb1-97" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x2</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb1-98"><a href="#cb1-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y2</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb1-99"><a href="#cb1-99" aria-hidden="true" tabindex="-1"></a>    <span class="dt">clip</span><span class="op">:</span> <span class="st">"sphere"</span><span class="op">,</span></span>
<span id="cb1-100"><a href="#cb1-100" aria-hidden="true" tabindex="-1"></a>    <span class="dt">interpolate</span><span class="op">:</span> <span class="st">"barycentric"</span></span>
<span id="cb1-101"><a href="#cb1-101" aria-hidden="true" tabindex="-1"></a>})<span class="op">,</span></span>
<span id="cb1-102"><a href="#cb1-102" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">geo</span>(land<span class="op">,</span> {<span class="dt">fill</span><span class="op">:</span> <span class="st">"currentColor"</span><span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">,</span></span>
<span id="cb1-103"><a href="#cb1-103" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">sphere</span>()<span class="op">,</span></span>
<span id="cb1-104"><a href="#cb1-104" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb1-105"><a href="#cb1-105" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-8" data-nodetype="expression">

</div>
</div>
</div>
</div>
<p>It is interesting to note that some regions (e.g.&nbsp;North Indian Ocean, Eastern Pacific, Antarctic margin) have <span class="math inline">\(f_{100}\)</span> values above 0.5 at already ~500 m, indicating that the carbon sequestration flux would be underestimated in those regions if the traditional approach (i.e.&nbsp;sequestration assumed to occur below a fixed reference depth, typically 1000 m) was used. In contrast, other regions (e.g.&nbsp;North Eastern Atlantic, Antarctic Circumpolar Current) have <span class="math inline">\(f_{100}\)</span> values below 0.5 at 1000 m. Following traditional metrics, we would therefore overestimate the carbon sequestration flux in those regions.</p>
<p>Using those <span class="math inline">\(f_{100}\)</span> values, it is therefore possible to compute carbon sequestration fluxes (<span class="math inline">\(F_{seq}\)</span>). For each water layer of thickness <span class="math inline">\(\Delta z\)</span>, we need to compute the remineralization flux (<span class="math inline">\(F_{remin}\)</span>), that is the flux of biogenic DIC, and multiply it by the corresponding <span class="math inline">\(f_{100}\)</span> values to get the sequestration flux of biogenic DIC.</p>
<p><span class="math display">\[
F_{seq}(\Delta z) = F_{remin}(\Delta z) \times f_{100}(\Delta z)
\]</span></p>
<p>Based on that equation, it looks like we only need to compute <span class="math inline">\(F_{remin}\)</span> and the work is over ! It is of course a little trickier.</p>
</section>
<section id="a-new-paradigm-for-the-bcp" class="level1">
<h1>A new paradigm for the BCP</h1>
<p>If you remember the definition of the BCP, it says <em>[…] organic matter […] transported to the ocean interior […]</em>. The carbon flux leaving the euphotic zone (EZ, where there is enough light for photosynthesis to occur) for the ocean interior is referred to as the export flux. The export depth is often set at 100 m but can also be set at the base of the EZ.</p>
<p>Until recently, the transport of organic carbon was solely attributed to the gravitational settling of POC. However, <span class="citation" data-cites="Boyd2019-ez">Boyd et al. (<a href="#ref-Boyd2019-ez" role="doc-biblioref">2019</a>)</span> revised this assumption by adding new biological and physical mechanisms that inject sinking (i.e.&nbsp;POC) and suspended (i.e.&nbsp;DOC) particles at depth through the action of vertically migrating organisms and physical circulation (see figure below).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/synthesis_pump_VF.png" width="1000" height="500" class="figure-img"></p>
<figcaption><span style="color: gray;">Conceptual representation of the three export pathways of the BCP <span class="math inline">\(\textcopyright\)</span>Thomas Boniface.</span></figcaption>
</figure>
</div>
<p>The BCP can therefore be seen as the combination of three export pathways:</p>
<ol type="1">
<li>The biological gravitational pump (BGP).</li>
<li>The biologically mediated particle injection pump (migrant pump), which consists in the direct injection of POC below the euphotic zone through the vertical migration of animals (on daily and seasonal time scales).</li>
<li>The physically mediated particle injection pump (mixing pump), composed of three separate pumps: the mixed layer pump, the eddy subduction pump and the large-scale subduction pump that directly inject DOC below the surface layer (i.e.&nbsp;euphotic zone).</li>
</ol>
</section>
<section id="a-variety-of-converse-versions" class="level1">
<h1>A variety of CONVERSE versions</h1>
<p>Thus, to estimate the global sequestration flux by the BCP, we needed to take into account the remineralization flux of each export pathway. For this, we used POC and DOC data derived from the model of <span class="citation" data-cites="DeVries2017-wu">DeVries and Weber (<a href="#ref-DeVries2017-wu" role="doc-biblioref">2017</a>)</span> as well as POC fluxes obtained from the best known relationship of <span class="citation" data-cites="Martin1987-um">Martin et al. (<a href="#ref-Martin1987-um" role="doc-biblioref">1987</a>)</span> — Martin’s Law — which describes (empirically) the attenuation of the sinking POC flux with depth.</p>
<p><span class="math display">\[
F_{z} = F_{z_{export}} \left(\frac{z}{z_{export}}\right)^{-b}
\]</span></p>
<p>where <span class="math inline">\(F_{z}\)</span>, <span class="math inline">\(z_{export}\)</span> and <span class="math inline">\(b\)</span> are, respectively, the estimated POC flux at depth <span class="math inline">\(z\)</span>, the depth of the export flux and the remineralization factor.</p>
<p>Using different remineralization factors (fixed, local or regional), data sources (model data or empirical), export flux (model data from <span class="citation" data-cites="Henson2012-ck">Henson, Sanders, and Madsen (<a href="#ref-Henson2012-ck" role="doc-biblioref">2012</a>)</span> or <span class="citation" data-cites="DeVries2017-wu">DeVries and Weber (<a href="#ref-DeVries2017-wu" role="doc-biblioref">2017</a>)</span>) export depths (100 m or base of EZ), we computed 7 distinct CONVERSE versions which are briefly resumed in the following table.</p>
<div class="cell" data-hash="converse_cache/html/unnamed-chunk-2_fc082652da1f4d56eef81db6ef5a8c14">
<div class="cell-output-display">
<div id="ihrmoveuff" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ihrmoveuff table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ihrmoveuff thead, #ihrmoveuff tbody, #ihrmoveuff tfoot, #ihrmoveuff tr, #ihrmoveuff td, #ihrmoveuff th {
  border-style: none;
}

#ihrmoveuff p {
  margin: 0;
  padding: 0;
}

#ihrmoveuff .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ihrmoveuff .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ihrmoveuff .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ihrmoveuff .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ihrmoveuff .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ihrmoveuff .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ihrmoveuff .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ihrmoveuff .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ihrmoveuff .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ihrmoveuff .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ihrmoveuff .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ihrmoveuff .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ihrmoveuff .gt_spanner_row {
  border-bottom-style: hidden;
}

#ihrmoveuff .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ihrmoveuff .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ihrmoveuff .gt_from_md > :first-child {
  margin-top: 0;
}

#ihrmoveuff .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ihrmoveuff .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ihrmoveuff .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ihrmoveuff .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ihrmoveuff .gt_row_group_first td {
  border-top-width: 2px;
}

#ihrmoveuff .gt_row_group_first th {
  border-top-width: 2px;
}

#ihrmoveuff .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ihrmoveuff .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ihrmoveuff .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ihrmoveuff .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ihrmoveuff .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ihrmoveuff .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ihrmoveuff .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ihrmoveuff .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ihrmoveuff .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ihrmoveuff .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ihrmoveuff .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ihrmoveuff .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ihrmoveuff .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ihrmoveuff .gt_left {
  text-align: left;
}

#ihrmoveuff .gt_center {
  text-align: center;
}

#ihrmoveuff .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ihrmoveuff .gt_font_normal {
  font-weight: normal;
}

#ihrmoveuff .gt_font_bold {
  font-weight: bold;
}

#ihrmoveuff .gt_font_italic {
  font-style: italic;
}

#ihrmoveuff .gt_super {
  font-size: 65%;
}

#ihrmoveuff .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ihrmoveuff .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ihrmoveuff .gt_indent_1 {
  text-indent: 5px;
}

#ihrmoveuff .gt_indent_2 {
  text-indent: 10px;
}

#ihrmoveuff .gt_indent_3 {
  text-indent: 15px;
}

#ihrmoveuff .gt_indent_4 {
  text-indent: 20px;
}

#ihrmoveuff .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="CONVERSE version" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">CONVERSE version</th>
<th id="Export depth" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Export depth</th>
<th id="Remineralization factor" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Remineralization factor</th>
<th id="BGP<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">BGP<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
<th id="Mixing pump<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>1</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Mixing pump<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span></th>
<th id="Migrant pump<span class=&quot;gt_footnote_marks&quot; style=&quot;white-space:nowrap;font-style:italic;font-weight:normal;&quot;><sup>2</sup></span>" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Migrant pump<span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span></th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="version">C1</td>
<td class="gt_row gt_left" headers="export_depth">100 m</td>
<td class="gt_row gt_left" headers="b">0.86</td>
<td class="gt_row gt_left" headers="BGP">Martin's Law</td>
<td class="gt_row gt_left" headers="Mixing_pump">export ratio</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="version">C2</td>
<td class="gt_row gt_left" headers="export_depth">100 m</td>
<td class="gt_row gt_left" headers="b">variable</td>
<td class="gt_row gt_left" headers="BGP">Martin's Law</td>
<td class="gt_row gt_left" headers="Mixing_pump">export ratio</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="version">C3</td>
<td class="gt_row gt_left" headers="export_depth">100 m</td>
<td class="gt_row gt_left" headers="b">regional</td>
<td class="gt_row gt_left" headers="BGP">Martin's Law</td>
<td class="gt_row gt_left" headers="Mixing_pump">export ratio</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="version">C4</td>
<td class="gt_row gt_left" headers="export_depth">EZ base</td>
<td class="gt_row gt_left" headers="b">-</td>
<td class="gt_row gt_left" headers="BGP">model data</td>
<td class="gt_row gt_left" headers="Mixing_pump">model data</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="version">C5</td>
<td class="gt_row gt_left" headers="export_depth">100 m</td>
<td class="gt_row gt_left" headers="b">-</td>
<td class="gt_row gt_left" headers="BGP">model data</td>
<td class="gt_row gt_left" headers="Mixing_pump">model data</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="version">C6</td>
<td class="gt_row gt_left" headers="export_depth">100 m</td>
<td class="gt_row gt_left" headers="b">0.86</td>
<td class="gt_row gt_left" headers="BGP">export ratio</td>
<td class="gt_row gt_left" headers="Mixing_pump">export ratio</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="version">C7</td>
<td class="gt_row gt_left" headers="export_depth">100 m</td>
<td class="gt_row gt_left" headers="b">0.86</td>
<td class="gt_row gt_left" headers="BGP">Martin's Law</td>
<td class="gt_row gt_left" headers="Mixing_pump">derived from POC export</td>
<td class="gt_row gt_left" headers="Migrant">derived from POC export</td>
</tr>
</tbody><tfoot class="gt_footnotes">
<tr class="even">
<td colspan="6" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>1</sup></span> To compare CONVERSE versions using different value of POC export flux, we used a scaling factor that we refer to as the export ratio, which is the ratio of the global POC export flux at 100 m from Henson et al., (2012) to the one from DeVries et al., (2017).</td>
</tr>
<tr class="odd">
<td colspan="6" class="gt_footnote"><span class="gt_footnote_marks" style="white-space:nowrap;font-style:italic;font-weight:normal;"><sup>2</sup></span> For the diel migration pump, we used the POC export at 100 m while we used the POC flux at ~600m for the seasonal migration pump. However, the later is only based on data from the northern North Atlantic hence it is underestimated and will be neglected here.</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</section>
<section id="a-visual-tool-to-compare-the-7-versions" class="level1">
<h1>A visual tool to compare the 7 versions</h1>
<p>If you read our paper (especially the supplementary material), you will quickly notice that we have <strong>lots</strong> of maps and tables which makes it sometimes difficult to compare the seven versions.</p>
<p>To improve the understanding of what’s going on between all CONVERSE versions, you will find below two little Earth that you can play with to focus on your area of interest.</p>
<p>Available data (without CONVERSE duplicates, see previous table):</p>
<ul>
<li>BCP (= BGP + Mixing + Migrant) sequestration fluxes</li>
<li>BGP, mixing and <strong>diel</strong> migrant pump sequestration fluxes</li>
<li>POC export flux at 100 m (two data sources) and at the EZ base</li>
<li>POC sequestration fluxes at 1000 m (i.e.&nbsp;fixed sequestration reference depth)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="198" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 197;"><span id="cb2-198"><a href="#cb2-198" aria-hidden="true" tabindex="-1"></a>viewof rotate2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb2-199"><a href="#cb2-199" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">180</span><span class="op">,</span> <span class="dv">180</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"longitude"</span>})<span class="op">,</span></span>
<span id="cb2-200"><a href="#cb2-200" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">90</span><span class="op">,</span> <span class="dv">90</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"latitude"</span>})<span class="op">,</span></span>
<span id="cb2-201"><a href="#cb2-201" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb2-202"><a href="#cb2-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-203"><a href="#cb2-203" aria-hidden="true" tabindex="-1"></a>viewof max_value2 <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">100</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"max colorbar"</span>})</span>
<span id="cb2-204"><a href="#cb2-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-205"><a href="#cb2-205" aria-hidden="true" tabindex="-1"></a>maps <span class="op">=</span> [</span>
<span id="cb2-206"><a href="#cb2-206" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"POC export 100 m (Henson et al., 2012)"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FexpH"</span>}<span class="op">,</span></span>
<span id="cb2-207"><a href="#cb2-207" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"POC export 100 m (DeVries et al., 2017)"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FexpT"</span>}<span class="op">,</span></span>
<span id="cb2-208"><a href="#cb2-208" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"POC export EZ base (DeVries et al., 2017)"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FexpZeu"</span>}<span class="op">,</span></span>
<span id="cb2-209"><a href="#cb2-209" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BGP - C1/C6/C7"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC_H_100m_martin"</span>}<span class="op">,</span></span>
<span id="cb2-210"><a href="#cb2-210" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BGP - C2"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC_H_100m_henson"</span>}<span class="op">,</span></span>
<span id="cb2-211"><a href="#cb2-211" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BGP - C3"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC_H_100m_guidi"</span>}<span class="op">,</span></span>
<span id="cb2-212"><a href="#cb2-212" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BGP - C4"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC_ST_Zeu"</span>}<span class="op">,</span></span>
<span id="cb2-213"><a href="#cb2-213" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BGP - C5"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC_ST_100m"</span>}<span class="op">,</span></span>
<span id="cb2-214"><a href="#cb2-214" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Mixing - C1/C2/C3"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqDOC_H_100m_martin"</span>}<span class="op">,</span></span>
<span id="cb2-215"><a href="#cb2-215" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Mixing - C4"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqDOC_ST_Zeu"</span>}<span class="op">,</span></span>
<span id="cb2-216"><a href="#cb2-216" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Mixing - C5"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqDOC_ST_100m"</span>}<span class="op">,</span></span>
<span id="cb2-217"><a href="#cb2-217" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Mixing - C6"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqDOC_C6"</span>}<span class="op">,</span></span>
<span id="cb2-218"><a href="#cb2-218" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Mixing - C7"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqDOC_H_100m_C7"</span>}<span class="op">,</span></span>
<span id="cb2-219"><a href="#cb2-219" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Migrant - C1/C2/C3/C6/C7"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqMigrD_H_100m_martin"</span>}<span class="op">,</span></span>
<span id="cb2-220"><a href="#cb2-220" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Migrant - C4/C5"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqMigrD_ST_Zeu"</span>}<span class="op">,</span></span>
<span id="cb2-221"><a href="#cb2-221" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C1"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_H_100m_martin"</span>}<span class="op">,</span></span>
<span id="cb2-222"><a href="#cb2-222" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C2"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_H_100m_henson"</span>}<span class="op">,</span></span>
<span id="cb2-223"><a href="#cb2-223" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C3"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_H_100m_guidi"</span>}<span class="op">,</span></span>
<span id="cb2-224"><a href="#cb2-224" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C4"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_ST_Zeu"</span>}<span class="op">,</span></span>
<span id="cb2-225"><a href="#cb2-225" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C5"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_ST_100m"</span>}<span class="op">,</span></span>
<span id="cb2-226"><a href="#cb2-226" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C6"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_H_100m_C6"</span>}<span class="op">,</span></span>
<span id="cb2-227"><a href="#cb2-227" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"BCP - C7"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqBCPs_H_100m_C7"</span>}<span class="op">,</span></span>
<span id="cb2-228"><a href="#cb2-228" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fseq@1000 m - C1/C7"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC1000m_martin"</span>}<span class="op">,</span></span>
<span id="cb2-229"><a href="#cb2-229" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fseq@1000 m - C2"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC1000m_henson"</span>}<span class="op">,</span></span>
<span id="cb2-230"><a href="#cb2-230" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fseq@1000 m - C3"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC1000m_guidi"</span>}<span class="op">,</span></span>
<span id="cb2-231"><a href="#cb2-231" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fseq@1000 m - C4/C5"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC1000m_C4"</span>}<span class="op">,</span></span>
<span id="cb2-232"><a href="#cb2-232" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">label</span><span class="op">:</span> <span class="st">"Fseq@1000 m - C6"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="st">"FseqPOC1000m_C6"</span>}<span class="op">,</span></span>
<span id="cb2-233"><a href="#cb2-233" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb2-234"><a href="#cb2-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-235"><a href="#cb2-235" aria-hidden="true" tabindex="-1"></a>viewof left_data <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb2-236"><a href="#cb2-236" aria-hidden="true" tabindex="-1"></a>  maps<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"left data"</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">label</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> maps<span class="op">.</span><span class="fu">find</span>(y <span class="kw">=&gt;</span> y<span class="op">.</span><span class="at">label</span> <span class="op">==</span> <span class="st">"POC export 100 m (Henson et al., 2012)"</span>)}</span>
<span id="cb2-237"><a href="#cb2-237" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb2-238"><a href="#cb2-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-239"><a href="#cb2-239" aria-hidden="true" tabindex="-1"></a>viewof right_data <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(</span>
<span id="cb2-240"><a href="#cb2-240" aria-hidden="true" tabindex="-1"></a>  maps<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"right data"</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> x <span class="kw">=&gt;</span> x<span class="op">.</span><span class="at">label</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> maps<span class="op">.</span><span class="fu">find</span>(y <span class="kw">=&gt;</span> y<span class="op">.</span><span class="at">label</span> <span class="op">==</span> <span class="st">"POC export 100 m (DeVries et al., 2017)"</span>)}</span>
<span id="cb2-241"><a href="#cb2-241" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-2-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="248" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 247;"><span id="cb3-248"><a href="#cb3-248" aria-hidden="true" tabindex="-1"></a>data_selected_left <span class="op">=</span> d3<span class="op">.</span><span class="fu">json</span>(<span class="vs">`data_converse/</span><span class="sc">${</span>left_data<span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">.geojson`</span>)<span class="op">.</span><span class="fu">then</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>(f <span class="kw">=&gt;</span> {</span>
<span id="cb3-249"><a href="#cb3-249" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> c <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoCentroid</span>(f)<span class="op">;</span></span>
<span id="cb3-250"><a href="#cb3-250" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {<span class="dt">value</span><span class="op">:</span> f<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">value</span><span class="op">,</span> <span class="dt">longitude</span><span class="op">:</span> c[<span class="dv">0</span>]<span class="op">,</span> <span class="dt">latitude</span><span class="op">:</span> c[<span class="dv">1</span>]}<span class="op">;</span></span>
<span id="cb3-251"><a href="#cb3-251" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb3-252"><a href="#cb3-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-253"><a href="#cb3-253" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb3-254"><a href="#cb3-254" aria-hidden="true" tabindex="-1"></a>  <span class="dt">projection</span><span class="op">:</span> {<span class="dt">width</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">height</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">"orthographic"</span><span class="op">,</span> <span class="dt">rotate</span><span class="op">:</span> rotate2}<span class="op">,</span></span>
<span id="cb3-255"><a href="#cb3-255" aria-hidden="true" tabindex="-1"></a>  <span class="op">&lt;!--</span> <span class="dt">projection</span><span class="op">:</span> {<span class="dt">type</span><span class="op">:</span> <span class="st">"orthographic"</span><span class="op">,</span> <span class="dt">rotate</span><span class="op">:</span> [<span class="op">-</span>longitude<span class="op">,</span> <span class="op">-</span>latitude]<span class="op">,</span> <span class="dt">domain</span><span class="op">:</span> circle}<span class="op">,</span> <span class="op">--&gt;</span></span>
<span id="cb3-256"><a href="#cb3-256" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb3-257"><a href="#cb3-257" aria-hidden="true" tabindex="-1"></a>    <span class="dt">scheme</span><span class="op">:</span> <span class="st">"BuPu"</span><span class="op">,</span></span>
<span id="cb3-258"><a href="#cb3-258" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> max_value2]<span class="op">,</span></span>
<span id="cb3-259"><a href="#cb3-259" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb3-260"><a href="#cb3-260" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"carbon flux (mg C m-2 year-1)"</span></span>
<span id="cb3-261"><a href="#cb3-261" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb3-262"><a href="#cb3-262" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb3-263"><a href="#cb3-263" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">raster</span>(data_selected_left<span class="op">,</span> {</span>
<span id="cb3-264"><a href="#cb3-264" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fill</span><span class="op">:</span> <span class="st">"value"</span><span class="op">,</span></span>
<span id="cb3-265"><a href="#cb3-265" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb3-266"><a href="#cb3-266" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">91</span><span class="op">,</span></span>
<span id="cb3-267"><a href="#cb3-267" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x1</span><span class="op">:</span> <span class="op">-</span><span class="dv">180</span><span class="op">,</span></span>
<span id="cb3-268"><a href="#cb3-268" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y1</span><span class="op">:</span> <span class="op">-</span><span class="dv">90</span><span class="op">,</span></span>
<span id="cb3-269"><a href="#cb3-269" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x2</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb3-270"><a href="#cb3-270" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y2</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb3-271"><a href="#cb3-271" aria-hidden="true" tabindex="-1"></a>    <span class="dt">clip</span><span class="op">:</span> <span class="st">"sphere"</span><span class="op">,</span></span>
<span id="cb3-272"><a href="#cb3-272" aria-hidden="true" tabindex="-1"></a>    <span class="dt">interpolate</span><span class="op">:</span> <span class="st">"barycentric"</span><span class="op">,</span></span>
<span id="cb3-273"><a href="#cb3-273" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointerEvents</span><span class="op">:</span> <span class="st">"auto"</span><span class="op">,</span></span>
<span id="cb3-274"><a href="#cb3-274" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb3-275"><a href="#cb3-275" aria-hidden="true" tabindex="-1"></a>})<span class="op">,</span></span>
<span id="cb3-276"><a href="#cb3-276" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">geo</span>(land<span class="op">,</span> {<span class="dt">fill</span><span class="op">:</span> <span class="st">"currentColor"</span><span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">,</span></span>
<span id="cb3-277"><a href="#cb3-277" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">sphere</span>()<span class="op">,</span></span>
<span id="cb3-278"><a href="#cb3-278" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb3-279"><a href="#cb3-279" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="286" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 285;"><span id="cb4-286"><a href="#cb4-286" aria-hidden="true" tabindex="-1"></a>data_selected_right <span class="op">=</span> d3<span class="op">.</span><span class="fu">json</span>(<span class="vs">`data_converse/</span><span class="sc">${</span>right_data<span class="op">.</span><span class="at">value</span><span class="sc">}</span><span class="vs">.geojson`</span>)<span class="op">.</span><span class="fu">then</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">map</span>(f <span class="kw">=&gt;</span> {</span>
<span id="cb4-287"><a href="#cb4-287" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> c <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoCentroid</span>(f)<span class="op">;</span></span>
<span id="cb4-288"><a href="#cb4-288" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> {<span class="dt">value</span><span class="op">:</span> f<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">value</span><span class="op">,</span> <span class="dt">longitude</span><span class="op">:</span> c[<span class="dv">0</span>]<span class="op">,</span> <span class="dt">latitude</span><span class="op">:</span> c[<span class="dv">1</span>]}<span class="op">;</span></span>
<span id="cb4-289"><a href="#cb4-289" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb4-290"><a href="#cb4-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-291"><a href="#cb4-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-292"><a href="#cb4-292" aria-hidden="true" tabindex="-1"></a>Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-293"><a href="#cb4-293" aria-hidden="true" tabindex="-1"></a>  <span class="dt">projection</span><span class="op">:</span> {<span class="dt">width</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">height</span><span class="op">:</span> <span class="dv">500</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">"orthographic"</span><span class="op">,</span> <span class="dt">rotate</span><span class="op">:</span> rotate2}<span class="op">,</span></span>
<span id="cb4-294"><a href="#cb4-294" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb4-295"><a href="#cb4-295" aria-hidden="true" tabindex="-1"></a>    <span class="dt">scheme</span><span class="op">:</span> <span class="st">"BuPu"</span><span class="op">,</span></span>
<span id="cb4-296"><a href="#cb4-296" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> max_value2]<span class="op">,</span></span>
<span id="cb4-297"><a href="#cb4-297" aria-hidden="true" tabindex="-1"></a>    <span class="dt">legend</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-298"><a href="#cb4-298" aria-hidden="true" tabindex="-1"></a>    <span class="dt">label</span><span class="op">:</span> <span class="st">"carbon flux (mg C m-2 year-1)"</span></span>
<span id="cb4-299"><a href="#cb4-299" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-300"><a href="#cb4-300" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-301"><a href="#cb4-301" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">raster</span>(data_selected_right<span class="op">,</span> {</span>
<span id="cb4-302"><a href="#cb4-302" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fill</span><span class="op">:</span> <span class="st">"value"</span><span class="op">,</span></span>
<span id="cb4-303"><a href="#cb4-303" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb4-304"><a href="#cb4-304" aria-hidden="true" tabindex="-1"></a>    <span class="dt">height</span><span class="op">:</span> <span class="dv">91</span><span class="op">,</span></span>
<span id="cb4-305"><a href="#cb4-305" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x1</span><span class="op">:</span> <span class="op">-</span><span class="dv">180</span><span class="op">,</span></span>
<span id="cb4-306"><a href="#cb4-306" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y1</span><span class="op">:</span> <span class="op">-</span><span class="dv">90</span><span class="op">,</span></span>
<span id="cb4-307"><a href="#cb4-307" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x2</span><span class="op">:</span> <span class="dv">180</span><span class="op">,</span></span>
<span id="cb4-308"><a href="#cb4-308" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y2</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span></span>
<span id="cb4-309"><a href="#cb4-309" aria-hidden="true" tabindex="-1"></a>    <span class="dt">clip</span><span class="op">:</span> <span class="st">"sphere"</span><span class="op">,</span></span>
<span id="cb4-310"><a href="#cb4-310" aria-hidden="true" tabindex="-1"></a>    <span class="dt">interpolate</span><span class="op">:</span> <span class="st">"barycentric"</span><span class="op">,</span></span>
<span id="cb4-311"><a href="#cb4-311" aria-hidden="true" tabindex="-1"></a>    <span class="dt">pointerEvents</span><span class="op">:</span> <span class="st">"auto"</span><span class="op">,</span></span>
<span id="cb4-312"><a href="#cb4-312" aria-hidden="true" tabindex="-1"></a>    <span class="dt">tip</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb4-313"><a href="#cb4-313" aria-hidden="true" tabindex="-1"></a>})<span class="op">,</span></span>
<span id="cb4-314"><a href="#cb4-314" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">geo</span>(land<span class="op">,</span> {<span class="dt">fill</span><span class="op">:</span> <span class="st">"currentColor"</span><span class="op">,</span> <span class="dt">fillOpacity</span><span class="op">:</span> <span class="dv">1</span>})<span class="op">,</span></span>
<span id="cb4-315"><a href="#cb4-315" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">sphere</span>()<span class="op">,</span></span>
<span id="cb4-316"><a href="#cb4-316" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb4-317"><a href="#cb4-317" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-4-2" data-nodetype="expression">

</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="converse-in-numbers" class="level1">
<h1>CONVERSE in numbers</h1>
<p>I hope you have spotted some interesting features in the previous section ! Now, it’s time for some numbers to close the topic once and for all !</p>
</section>
<section id="conclusion" class="level1">




</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">Conclusion</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Boyd2019-ez" class="csl-entry" role="listitem">
Boyd, Philip W, Hervé Claustre, Marina Levy, David A Siegel, and Thomas Weber. 2019. <span>“Multi-Faceted Particle Pumps Drive Carbon Sequestration in the Ocean.”</span> <em>Nature</em> 568 (7752): 327–35. <a href="https://doi.org/10.1038/s41586-019-1098-2">https://doi.org/10.1038/s41586-019-1098-2</a>.
</div>
<div id="ref-DeVries2017-wu" class="csl-entry" role="listitem">
DeVries, Tim, and Thomas Weber. 2017. <span>“The Export and Fate of Organic Matter in the Ocean: New Constraints from Combining Satellite and Oceanographic Tracer Observations.”</span> <em>Global Biogeochem. Cycles</em> 31 (3): 535–55. <a href="https://doi.org/10.1002/2016gb005551">https://doi.org/10.1002/2016gb005551</a>.
</div>
<div id="ref-Henson2012-ck" class="csl-entry" role="listitem">
Henson, Stephanie A, Richard Sanders, and Esben Madsen. 2012. <span>“Global Patterns in Efficiency of Particulate Organic Carbon Export and Transfer to the Deep Ocean.”</span> <em>Global Biogeochem. Cycles</em> 26 (1). <a href="https://doi.org/10.1029/2011gb004099">https://doi.org/10.1029/2011gb004099</a>.
</div>
<div id="ref-Ipcc2019-qc" class="csl-entry" role="listitem">
IPCC. 2019. <span>“<span>IPCC</span> Special Report on the Ocean and Cryosphere in a Changing Climate.”</span> Edited by H.-O, Pörtner, D.C. Roberts, V. Masson-Delmotte, P. Zhai, M. Tignor, E. Poloczanska, K. Mintenbeck, A. Alegrı́a, M. Nicolai, A. Okem, J. Petzold, B. Rama, N.M. Weyer. Cambridge University Press, Cambridge, UK; New York, NY, USA. <a href="https://doi.org/10.1017/9781009157964">https://doi.org/10.1017/9781009157964</a>.
</div>
<div id="ref-Martin1987-um" class="csl-entry" role="listitem">
Martin, J H, G A Knauer, D Karl, and W W Broenkow. 1987. <span>“<span>VERTEX</span>: Carbon Cycling in the Northeast Pacific.”</span> <em>Deep Sea Research Part A. Oceanographic Research Papers</em> 34 (2): 267–85. <a href="https://doi.org/10.1016/0198-0149(87)90086-0">https://doi.org/10.1016/0198-0149(87)90086-0</a>.
</div>
<div id="ref-Siegel2021-oz" class="csl-entry" role="listitem">
Siegel, David A, Tim DeVries, Scott Doney, and Tom Bell. 2021. <span>“Assessing the Sequestration Time Scales of Some Ocean-Based Carbon Dioxide Reduction Strategies.”</span> <em>Environ. Res. Lett.</em>, June. <a href="https://doi.org/10.1088/1748-9326/ac0be0">https://doi.org/10.1088/1748-9326/ac0be0</a>.
</div>
</div></section></div></main> <!-- /main -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpretLenient","cellName":"ojs-cell-1","inline":false,"source":"\nd3 = require(\"d3@7\")\n\nworld = FileAttachment(\"data_converse/countries-110m.json\").json()\nland = topojson.feature(world, world.objects.land)\n\nf100_data = d3.json(\"data_converse/f100_full.geojson\").then(d => d.features.map(f => {\n  const c = d3.geoCentroid(f);\n  return {value: f.properties.value, depth: f.properties.depth, longitude: c[0], latitude: c[1]};\n}))\n\nviewof max_value1 = Inputs.range([0, 1], {step: 0.05, label: \"max colorbar\"})\n\nviewof f100_depth = Inputs.select(\n  [\n    5, 15, 25, 36, 48, 61, 75, 91,\n    109, 130, 153, 179, 209, 242,\n    279, 320, 365, 415, 470, 531,\n    597, 669, 747, 832, 923, 1022,\n    1128, 1241, 1363, 1493, 1631,\n    1778, 1935, 2101, 2277, 2462,\n    2658, 2865, 3083, 3312, 3552,\n    3804, 4068, 4345, 4634, 4937,\n    5253, 5582\n  ],\n  {label: \"depth (m)\", value: 531.0}\n)\n\nf100_filtered = f100_data.filter(data => data.depth == f100_depth);\n\nPlot.plot({\n  projection: {type: \"equal-earth\"},\n  color: {\n    scheme: \"BuPu\",\n    domain: [0, max_value1],\n    legend: true,\n    label: \"f100\"\n  },\n  marks: [\n    Plot.raster(f100_filtered, {\n    fill: \"value\",\n    width: 180,\n    height: 91,\n    x1: -180,\n    y1: -90,\n    x2: 180,\n    y2: 90,\n    clip: \"sphere\",\n    interpolate: \"barycentric\"\n}),\n    Plot.geo(land, {fill: \"currentColor\", fillOpacity: 1}),\n    Plot.sphere(),\n  ]\n})\n"},{"methodName":"interpretLenient","cellName":"ojs-cell-2","inline":false,"source":"\nviewof rotate2 = Inputs.form([\n  Inputs.range([-180, 180], {step: 1, label: \"longitude\"}),\n  Inputs.range([-90, 90], {step: 1, label: \"latitude\"}),\n])\n\nviewof max_value2 = Inputs.range([0, 100], {step: 0.05, label: \"max colorbar\"})\n\nmaps = [\n  {label: \"POC export 100 m (Henson et al., 2012)\", value: \"FexpH\"},\n  {label: \"POC export 100 m (DeVries et al., 2017)\", value: \"FexpT\"},\n  {label: \"POC export EZ base (DeVries et al., 2017)\", value: \"FexpZeu\"},\n  {label: \"BGP - C1/C6/C7\", value: \"FseqPOC_H_100m_martin\"},\n  {label: \"BGP - C2\", value: \"FseqPOC_H_100m_henson\"},\n  {label: \"BGP - C3\", value: \"FseqPOC_H_100m_guidi\"},\n  {label: \"BGP - C4\", value: \"FseqPOC_ST_Zeu\"},\n  {label: \"BGP - C5\", value: \"FseqPOC_ST_100m\"},\n  {label: \"Mixing - C1/C2/C3\", value: \"FseqDOC_H_100m_martin\"},\n  {label: \"Mixing - C4\", value: \"FseqDOC_ST_Zeu\"},\n  {label: \"Mixing - C5\", value: \"FseqDOC_ST_100m\"},\n  {label: \"Mixing - C6\", value: \"FseqDOC_C6\"},\n  {label: \"Mixing - C7\", value: \"FseqDOC_H_100m_C7\"},\n  {label: \"Migrant - C1/C2/C3/C6/C7\", value: \"FseqMigrD_H_100m_martin\"},\n  {label: \"Migrant - C4/C5\", value: \"FseqMigrD_ST_Zeu\"},\n  {label: \"BCP - C1\", value: \"FseqBCPs_H_100m_martin\"},\n  {label: \"BCP - C2\", value: \"FseqBCPs_H_100m_henson\"},\n  {label: \"BCP - C3\", value: \"FseqBCPs_H_100m_guidi\"},\n  {label: \"BCP - C4\", value: \"FseqBCPs_ST_Zeu\"},\n  {label: \"BCP - C5\", value: \"FseqBCPs_ST_100m\"},\n  {label: \"BCP - C6\", value: \"FseqBCPs_H_100m_C6\"},\n  {label: \"BCP - C7\", value: \"FseqBCPs_H_100m_C7\"},\n  {label: \"Fseq@1000 m - C1/C7\", value: \"FseqPOC1000m_martin\"},\n  {label: \"Fseq@1000 m - C2\", value: \"FseqPOC1000m_henson\"},\n  {label: \"Fseq@1000 m - C3\", value: \"FseqPOC1000m_guidi\"},\n  {label: \"Fseq@1000 m - C4/C5\", value: \"FseqPOC1000m_C4\"},\n  {label: \"Fseq@1000 m - C6\", value: \"FseqPOC1000m_C6\"},\n]\n\nviewof left_data = Inputs.select(\n  maps, {label: \"left data\", format: x => x.label, value: maps.find(y => y.label == \"POC export 100 m (Henson et al., 2012)\")}\n);\n\nviewof right_data = Inputs.select(\n  maps, {label: \"right data\", format: x => x.label, value: maps.find(y => y.label == \"POC export 100 m (DeVries et al., 2017)\")}\n);\n"},{"methodName":"interpretLenient","cellName":"ojs-cell-3","inline":false,"source":"\ndata_selected_left = d3.json(`data_converse/${left_data.value}.geojson`).then(d => d.features.map(f => {\n  const c = d3.geoCentroid(f);\n  return {value: f.properties.value, longitude: c[0], latitude: c[1]};\n}))\n\nPlot.plot({\n  projection: {width: 500, height: 500, type: \"orthographic\", rotate: rotate2},\n  <!-- projection: {type: \"orthographic\", rotate: [-longitude, -latitude], domain: circle}, -->\n  color: {\n    scheme: \"BuPu\",\n    domain: [0, max_value2],\n    legend: true,\n    label: \"carbon flux (mg C m-2 year-1)\"\n  },\n  marks: [\n    Plot.raster(data_selected_left, {\n    fill: \"value\",\n    width: 180,\n    height: 91,\n    x1: -180,\n    y1: -90,\n    x2: 180,\n    y2: 90,\n    clip: \"sphere\",\n    interpolate: \"barycentric\",\n    pointerEvents: \"auto\",\n    tip: true\n}),\n    Plot.geo(land, {fill: \"currentColor\", fillOpacity: 1}),\n    Plot.sphere(),\n  ]\n})\n"},{"methodName":"interpretLenient","cellName":"ojs-cell-4","inline":false,"source":"\ndata_selected_right = d3.json(`data_converse/${right_data.value}.geojson`).then(d => d.features.map(f => {\n  const c = d3.geoCentroid(f);\n  return {value: f.properties.value, longitude: c[0], latitude: c[1]};\n}))\n\n\nPlot.plot({\n  projection: {width: 500, height: 500, type: \"orthographic\", rotate: rotate2},\n  color: {\n    scheme: \"BuPu\",\n    domain: [0, max_value2],\n    legend: true,\n    label: \"carbon flux (mg C m-2 year-1)\"\n  },\n  marks: [\n    Plot.raster(data_selected_right, {\n    fill: \"value\",\n    width: 180,\n    height: 91,\n    x1: -180,\n    y1: -90,\n    x2: 180,\n    y2: 90,\n    clip: \"sphere\",\n    interpolate: \"barycentric\",\n    pointerEvents: \"auto\",\n    tip: true\n}),\n    Plot.geo(land, {fill: \"currentColor\", fillOpacity: 1}),\n    Plot.sphere(),\n  ]\n})\n"},{"methodName":"interpretQuiet","source":"shinyInput('max_value1')"},{"methodName":"interpretQuiet","source":"shinyInput('f100_depth')"},{"methodName":"interpretQuiet","source":"shinyInput('rotate2')"},{"methodName":"interpretQuiet","source":"shinyInput('max_value2')"},{"methodName":"interpretQuiet","source":"shinyInput('left_data')"},{"methodName":"interpretQuiet","source":"shinyInput('right_data')"}]}
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        for (let i = 0; i < 2; i++) {
          container.appendChild(note.children[i].cloneNode(true));
        }
        return container.innerHTML
      } else {
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        console.log("RESIZE");
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright © 2023 Florian Ricour. All rights reserved.</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>